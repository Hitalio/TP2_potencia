Version 4
SHEET 1 4256 1108
WIRE 2400 -688 2352 -688
WIRE 2672 -688 2400 -688
WIRE 2800 -688 2736 -688
WIRE 2352 -672 2352 -688
WIRE 2352 -672 2320 -672
WIRE 2256 -656 2160 -656
WIRE 2672 -656 2528 -656
WIRE 2320 -640 2320 -656
WIRE 2320 -640 2288 -640
WIRE 2288 -624 2288 -640
WIRE 2352 -624 2352 -672
WIRE 2400 -624 2352 -624
WIRE 2528 -624 2528 -656
WIRE 2528 -624 2480 -624
WIRE 1792 -576 880 -576
WIRE 880 -528 880 -576
WIRE 880 -528 784 -528
WIRE 1984 -512 1840 -512
WIRE 1840 -448 1840 -512
WIRE 1856 -448 1840 -448
WIRE 1984 -448 1984 -512
WIRE 2160 -448 2160 -656
WIRE 2160 -448 1984 -448
WIRE 2240 -448 2160 -448
WIRE 176 -432 176 -448
WIRE 384 -432 384 -448
WIRE 1504 -432 1504 -464
WIRE 1504 -432 1344 -432
WIRE 1648 -432 1504 -432
WIRE 1984 -432 1984 -448
WIRE 1984 -432 1920 -432
WIRE 2384 -432 2304 -432
WIRE 2672 -432 2384 -432
WIRE 1344 -416 1344 -432
WIRE 1648 -416 1648 -432
WIRE 1792 -416 1792 -576
WIRE 1856 -416 1792 -416
WIRE 2304 -400 2304 -416
WIRE 2304 -400 2272 -400
WIRE 2672 -400 2656 -400
WIRE 272 -384 240 -384
WIRE 320 -384 272 -384
WIRE 2272 -384 2272 -400
WIRE 2384 -384 2384 -432
WIRE 2448 -384 2384 -384
WIRE 2560 -384 2528 -384
WIRE 2656 -384 2656 -400
WIRE 2656 -384 2560 -384
WIRE 1456 -368 1408 -368
WIRE 1584 -368 1456 -368
WIRE 2560 -368 2560 -384
WIRE 1456 -320 1456 -368
WIRE 1456 -320 1344 -320
WIRE 176 -304 176 -336
WIRE 272 -304 272 -384
WIRE 272 -304 176 -304
WIRE 1344 -304 1344 -320
WIRE 1648 -304 1648 -320
WIRE 384 -272 384 -336
WIRE 560 -272 384 -272
WIRE 704 -256 624 -256
WIRE 736 -256 704 -256
WIRE 1440 -256 1408 -256
WIRE 1584 -256 1440 -256
WIRE 384 -240 384 -272
WIRE 560 -240 528 -240
WIRE 624 -224 624 -240
WIRE 624 -224 592 -224
WIRE 592 -208 592 -224
WIRE 1120 -192 1120 -240
WIRE 736 -176 736 -256
WIRE 864 -176 736 -176
WIRE 1024 -176 960 -176
WIRE 1344 -176 1344 -208
WIRE 1440 -176 1440 -256
WIRE 1440 -176 1344 -176
WIRE 528 -144 528 -240
WIRE 784 -144 784 -528
WIRE 784 -144 528 -144
WIRE 384 -128 384 -160
WIRE 384 -128 352 -128
WIRE 864 -128 736 -128
WIRE 1648 -112 1648 -208
WIRE 1744 -112 1648 -112
WIRE 1792 -112 1792 -416
WIRE 1792 -112 1744 -112
WIRE 1120 -96 1120 -112
WIRE 1200 -96 1120 -96
WIRE 384 -80 384 -128
WIRE 1120 -64 1120 -96
WIRE 1344 -64 1344 -176
WIRE 1648 -64 1648 -112
WIRE 528 -16 528 -144
WIRE 544 -16 528 -16
WIRE 1200 -16 1200 -96
WIRE 1200 -16 1184 -16
WIRE 1264 -16 1200 -16
WIRE 1280 -16 1264 -16
WIRE 1728 -16 1712 -16
WIRE 672 0 608 0
WIRE 736 0 736 -128
WIRE 736 0 672 0
WIRE 384 16 384 0
WIRE 544 16 384 16
WIRE 608 32 608 16
WIRE 608 32 576 32
WIRE 576 48 576 32
WIRE 1264 64 1264 -16
WIRE 1728 64 1728 -16
WIRE 1728 64 1264 64
WIRE 1120 80 1120 32
WIRE 1344 96 1344 32
WIRE 1648 96 1648 32
WIRE 2544 160 2528 160
WIRE 2720 160 2688 160
WIRE 3552 160 3520 160
WIRE 3744 160 3696 160
WIRE 1120 208 1120 160
WIRE 592 224 512 224
WIRE 624 224 592 224
WIRE 736 224 704 224
WIRE 1344 240 1344 176
WIRE 1472 240 1344 240
WIRE 1648 240 1648 176
WIRE 1776 240 1648 240
WIRE 1472 256 1472 240
WIRE 1776 256 1776 240
WIRE 2528 256 2528 160
WIRE 2528 256 2464 256
WIRE 2608 256 2528 256
WIRE 2720 256 2720 160
WIRE 2720 256 2688 256
WIRE 2768 256 2720 256
WIRE 2784 256 2768 256
WIRE 3520 256 3520 160
WIRE 3520 256 3504 256
WIRE 3600 256 3520 256
WIRE 3744 256 3744 160
WIRE 3744 256 3680 256
WIRE 3824 256 3744 256
WIRE 176 272 176 -304
WIRE 384 272 384 16
WIRE 592 272 592 224
WIRE 1344 272 1344 240
WIRE 1648 272 1648 240
WIRE 2768 272 2768 256
WIRE 1344 288 1344 272
WIRE 1648 288 1648 272
WIRE 3520 288 3520 256
WIRE 448 320 240 320
WIRE 512 320 512 224
WIRE 512 320 448 320
WIRE 528 320 512 320
WIRE 2176 320 2128 320
WIRE 2560 320 2464 320
WIRE 2672 320 2560 320
WIRE 3728 320 3616 320
WIRE 3824 320 3728 320
WIRE 4160 320 4112 320
WIRE 2672 336 2672 320
WIRE 3616 336 3616 320
WIRE 1424 352 1392 352
WIRE 1472 352 1472 336
WIRE 1728 352 1696 352
WIRE 1776 352 1776 336
WIRE 2176 384 2112 384
WIRE 2560 384 2464 384
WIRE 3824 384 3728 384
WIRE 4176 384 4112 384
WIRE 592 400 592 368
WIRE 592 400 512 400
WIRE 1024 416 1024 -176
WIRE 1728 416 1728 352
WIRE 1728 416 1024 416
WIRE 176 432 176 368
WIRE 384 432 384 368
WIRE 592 432 592 400
WIRE 2672 432 2672 416
WIRE 3616 432 3616 416
WIRE 976 448 976 -128
WIRE 1424 448 1424 352
WIRE 1424 448 976 448
WIRE 2176 448 2144 448
WIRE 2832 448 2832 272
WIRE 2912 448 2832 448
WIRE 3008 448 2992 448
WIRE 3072 448 3008 448
WIRE 3088 448 3072 448
WIRE 3184 448 3168 448
WIRE 3264 448 3184 448
WIRE 3328 448 3264 448
WIRE 3456 448 3456 272
WIRE 3456 448 3408 448
WIRE 4144 448 4112 448
WIRE 2144 464 2144 448
WIRE 4144 464 4144 448
WIRE 448 480 240 480
WIRE 512 480 512 400
WIRE 512 480 448 480
WIRE 528 480 512 480
WIRE 1344 496 1344 368
WIRE 1504 496 1344 496
WIRE 1648 496 1648 368
WIRE 1648 496 1504 496
WIRE 3008 496 3008 448
WIRE 3264 496 3264 448
WIRE 2176 512 2112 512
WIRE 2528 512 2528 480
WIRE 2528 512 2464 512
WIRE 2672 512 2672 496
WIRE 2672 512 2528 512
WIRE 3616 512 3616 496
WIRE 3760 512 3760 480
WIRE 3760 512 3616 512
WIRE 3824 512 3760 512
WIRE 4176 512 4112 512
WIRE 1504 528 1504 496
WIRE 2560 544 2560 384
WIRE 2768 544 2768 352
WIRE 2768 544 2560 544
WIRE 2832 544 2832 448
WIRE 2832 544 2768 544
WIRE 3456 544 3456 448
WIRE 3520 544 3520 368
WIRE 3520 544 3456 544
WIRE 3728 544 3728 384
WIRE 3728 544 3520 544
WIRE 2832 560 2832 544
WIRE 3456 560 3456 544
WIRE 2176 576 2144 576
WIRE 2528 576 2464 576
WIRE 3008 576 3008 560
WIRE 3136 576 3008 576
WIRE 3264 576 3264 560
WIRE 3264 576 3136 576
WIRE 3824 576 3760 576
WIRE 4144 576 4112 576
WIRE 2144 592 2144 576
WIRE 4144 592 4144 576
WIRE 3136 624 3136 576
WIRE 2560 640 2464 640
WIRE 2592 640 2560 640
WIRE 2720 640 2672 640
WIRE 2768 640 2720 640
WIRE 2784 640 2768 640
WIRE 3520 640 3504 640
WIRE 3552 640 3520 640
WIRE 3600 640 3552 640
WIRE 3744 640 3680 640
WIRE 3824 640 3744 640
WIRE 2528 688 2528 576
WIRE 2832 688 2832 656
WIRE 2832 688 2528 688
WIRE 3456 688 3456 656
WIRE 3760 688 3760 576
WIRE 3760 688 3456 688
WIRE 2768 704 2768 640
WIRE 2832 704 2832 688
WIRE 2864 704 2832 704
WIRE 3456 704 3456 688
WIRE 3456 704 3424 704
WIRE 3520 704 3520 640
WIRE 2832 720 2832 704
WIRE 3456 720 3456 704
WIRE 2560 736 2560 640
WIRE 2720 736 2720 640
WIRE 2720 736 2704 736
WIRE 2864 784 2864 704
WIRE 2864 784 2768 784
WIRE 3424 784 3424 704
WIRE 3520 784 3424 784
WIRE 3552 800 3552 640
WIRE 3584 800 3552 800
WIRE 3744 800 3744 640
WIRE 3744 800 3728 800
FLAG 80 -80 0
FLAG 352 -128 V6
FLAG 80 -160 V12
FLAG 384 -528 V12
FLAG 176 -528 V12
FLAG 1888 -400 0
FLAG 1888 -464 V12
FLAG 1120 208 0
FLAG 1776 352 V6
FLAG 1472 352 V6
FLAG 1120 -240 V40
FLAG 1792 -48 0
FLAG 1504 -464 V12
FLAG 1744 -112 Out
FLAG 80 96 0
FLAG 80 16 V6
FLAG 1504 528 0
FLAG 704 -336 V12
FLAG 672 -80 V12
FLAG 80 256 0
FLAG 80 176 V40
FLAG 736 224 V40
FLAG 592 528 0
FLAG 384 528 0
FLAG 176 528 0
FLAG 1008 -528 0
FLAG 592 -208 0
FLAG 592 -288 V12
FLAG 576 48 0
FLAG 576 -32 V12
FLAG 2272 -384 0
FLAG 2288 -624 0
FLAG 2272 -464 V12
FLAG 2288 -704 V12
FLAG 1872 -704 0
FLAG 1872 -784 Vsin
FLAG 2256 -688 Vsin
FLAG 2240 -416 Vsin
FLAG 2528 -560 0
FLAG 2560 -304 0
FLAG 2384 -512 V6
FLAG 2400 -768 V6
FLAG 2128 320 V6
FLAG 2528 480 V12
FLAG 2144 464 0
FLAG 2832 176 V40
FLAG 2112 384 Q
FLAG 2112 512 Qneg
FLAG 2144 592 0
FLAG 4160 320 V6
FLAG 3760 480 V12
FLAG 4144 464 0
FLAG 3456 176 V40
FLAG 4144 592 0
FLAG 2832 720 0
FLAG 3456 720 0
FLAG 4176 512 Q
FLAG 4176 384 Qneg
FLAG 3072 448 Vo1
FLAG 3184 448 Vo2
FLAG 3136 624 0
FLAG 2736 -432 Qneg
FLAG 2800 -688 Q
SYMBOL npn 240 272 M0
SYMATTR InstName Q1
SYMATTR Value BC548B
SYMBOL npn 448 272 M0
SYMATTR InstName Q2
SYMATTR Value BC548B
SYMBOL npn 528 272 R0
SYMATTR InstName Q3
SYMATTR Value BC548B
SYMBOL pnp 240 -336 R180
SYMATTR InstName Q4
SYMATTR Value BC558C
SYMBOL pnp 320 -336 M180
SYMATTR InstName Q5
SYMATTR Value BC558C
SYMBOL res 368 -256 R0
SYMATTR InstName R1
SYMATTR Value 1.2k
SYMBOL res 368 -96 R0
SYMATTR InstName R2
SYMATTR Value 1.2k
SYMBOL voltage 80 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 99 Left 2
SYMATTR Value 12
SYMATTR InstName V1
SYMBOL Digital\\srflop 912 -224 R0
WINDOW 3 -40 28 Left 2
SYMATTR Value Ic=1
SYMATTR InstName A1
SYMATTR Value2 VHIGH=5
SYMBOL Opamps\\opamp2 1888 -496 R0
SYMATTR InstName U5
SYMATTR Value TL081
SYMBOL npn 1280 -64 R0
SYMATTR InstName Q6
SYMATTR Value BC548B
SYMBOL npn 1712 -64 M0
SYMATTR InstName Q7
SYMATTR Value BC548B
SYMBOL res 1328 80 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 1632 80 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 1760 240 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 1456 240 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL npn 1184 -64 M0
SYMATTR InstName Q8
SYMATTR Value BC548B
SYMBOL res 1104 64 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 1104 -208 R0
SYMATTR InstName R9
SYMATTR Value 4.1k
SYMBOL cap 1776 -112 R0
SYMATTR InstName CL
SYMATTR Value 9.4n
SYMBOL pnp 1584 -208 M180
SYMATTR InstName Q9
SYMATTR Value BC558C
SYMBOL pnp 1408 -208 R180
SYMATTR InstName Q10
SYMATTR Value BC558C
SYMBOL voltage 80 0 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 101 Left 2
SYMATTR Value 6
SYMATTR InstName V6
SYMBOL res 688 -352 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 656 -96 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 160 -544 R0
SYMATTR InstName R14
SYMATTR Value 33
SYMBOL res 368 -544 R0
SYMATTR InstName R15
SYMATTR Value 33
SYMBOL res 720 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 50k
SYMBOL voltage 80 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 40
SYMBOL nmos 1392 272 M0
SYMATTR InstName M1
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL nmos 1696 272 M0
SYMATTR InstName M2
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL npn 528 432 R0
SYMATTR InstName Q11
SYMATTR Value BC548B
SYMBOL npn 448 432 M0
SYMATTR InstName Q12
SYMATTR Value BC548B
SYMBOL npn 240 432 M0
SYMATTR InstName Q13
SYMATTR Value BC548B
SYMBOL pnp 1408 -320 R180
SYMATTR InstName Q14
SYMATTR Value BC558C
SYMBOL pnp 1584 -320 M180
SYMATTR InstName Q15
SYMATTR Value BC558C
SYMBOL voltage 912 -528 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(5 7 0 10u 10u 0 20u)
SYMBOL xcomp_x11 592 -320 R0
SYMATTR InstName U3
SYMATTR Value LM311
SYMBOL xcomp_x11 576 -64 R0
SYMATTR InstName U1
SYMATTR Value LM311
SYMBOL Digital\\and 2704 -736 R0
WINDOW 3 -13 75 Left 2
SYMATTR Value Vhigh=6
SYMATTR InstName A2
SYMBOL Digital\\and 2704 -480 R0
WINDOW 3 -14 84 Left 2
SYMATTR Value Vhigh=6
SYMATTR InstName A3
SYMBOL res 2544 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10K
SYMBOL cap 2544 -368 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL voltage 1872 -800 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value SINE(6 1 10k)
SYMBOL res 2496 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10K
SYMBOL cap 2512 -624 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL xcomp_x11 2288 -736 R0
SYMATTR InstName U2
SYMATTR Value LM311
SYMBOL xcomp_x11 2272 -496 R0
SYMATTR InstName U4
SYMATTR Value LM311
SYMBOL res 2368 -528 R0
SYMATTR InstName R16
SYMATTR Value 500
SYMBOL res 2384 -784 R0
SYMATTR InstName R17
SYMATTR Value 500
SYMBOL diode 2688 496 R180
WINDOW 0 -24 -7 Left 2
WINDOW 3 -67 59 Left 2
SYMATTR InstName D1
SYMATTR Value MURS120
SYMBOL cap 2544 320 R0
SYMATTR InstName C3
SYMATTR Value 0.33µ
SYMBOL nmos 2784 176 R0
SYMATTR InstName Nchan1
SYMATTR Value IRF510
SYMBOL nmos 2784 560 R0
SYMATTR InstName Nchan2
SYMATTR Value IRF510
SYMBOL IR2110_ 2320 448 R0
SYMATTR InstName U6
SYMBOL res 2656 320 R0
SYMATTR InstName R18
SYMATTR Value 4.7
SYMBOL cap 2512 512 R0
SYMATTR InstName C4
SYMATTR Value 47µ
SYMBOL diode 3600 496 M180
WINDOW 0 -22 3 Left 2
WINDOW 3 -35 54 Left 2
SYMATTR InstName D2
SYMATTR Value MURS120
SYMBOL cap 3744 320 M0
SYMATTR InstName C5
SYMATTR Value 0.33µ
SYMBOL nmos 3504 176 M0
SYMATTR InstName Nchan3
SYMATTR Value IRF510
SYMBOL nmos 3504 560 M0
SYMATTR InstName Nchan4
SYMATTR Value IRF510
SYMBOL IR2110_ 3968 448 M0
SYMATTR InstName U7
SYMBOL res 3632 320 M0
SYMATTR InstName R19
SYMATTR Value 4.7
SYMBOL cap 3776 512 M0
WINDOW 0 -15 17 Left 2
WINDOW 3 -10 48 Left 2
SYMATTR InstName C6
SYMATTR Value 47µ
SYMBOL res 3184 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 8
SYMBOL res 2752 256 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res 3504 272 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL res 2752 688 R0
SYMATTR InstName R23
SYMATTR Value 10k
SYMBOL res 3504 688 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res 2704 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 10
SYMBOL res 2640 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 4.7
SYMBOL diode 2688 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 2704 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 2656 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 4.7
SYMBOL res 2688 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 10
SYMBOL res 3696 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 10
SYMBOL res 3648 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 4.7
SYMBOL diode 3632 176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 3664 816 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL res 3680 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 4.7
SYMBOL res 3696 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 10
SYMBOL ind 2896 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 36µ
SYMBOL ind 3312 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 36µ
SYMBOL cap 3024 560 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 0.56µ
SYMBOL cap 3280 560 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMATTR Value 0.56µ
TEXT 408 624 Left 2 !.include standard_bjt.lib
TEXT 168 584 Left 2 !.tran 0 100u 20u
TEXT 408 600 Left 2 !.include LM393.5_1
TEXT 408 648 Left 2 !.include TL081.301
TEXT 408 672 Left 2 !.model MySW SW(Vt=1 Vh=-0.4  Ron=0.01p Roff = 1meg)
TEXT 408 576 Left 2 !.inc bs170.lib
TEXT 760 576 Left 2 !.inc LM311.301
